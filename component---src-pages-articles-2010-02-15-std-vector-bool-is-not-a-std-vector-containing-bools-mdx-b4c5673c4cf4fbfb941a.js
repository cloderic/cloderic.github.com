(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"25dN":function(e,t,n){var a=n("XKFU");a(a.S,"Object",{is:n("g6HL")})},CyHz:function(e,t,n){var a=n("XKFU");a(a.S,"Math",{sign:n("lvtm")})},FLlr:function(e,t,n){var a=n("XKFU");a(a.P,"String",{repeat:n("l0Rn")})},"MG/a":function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return i})),n.d(t,"default",(function(){return l}));n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("q1tI");var a=n("7ljp"),r=n("fe0W");n("qKvR");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i={},c={_frontmatter:i},s=r.a;function l(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.mdx)(s,o({},c,n,{components:t,mdxType:"MDXLayout"}),Object(a.mdx)("p",null,"Everything in the title, but let me explain... Lately I've spent a lot of time\ntrying to make a serialization/deserialization work with the huge piece of\nsoftware I'm working on at Golaem. Anyway I came across a strange compiler error\nwhen trying to deserialize a ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::vector<bool>"),". Here's what our serialization\nengine is like:"),Object(a.mdx)("pre",null,Object(a.mdx)("code",o({parentName:"pre"},{className:"language-cpp"}),"template<T>\nvoid read(std::vector<T>& myVector, Bitstream myStream)\n{\n  unsigned int size;\n  read(size,myStream);\n  vector.resize(size);\n  for (unsigned int i = 0 ; i < size ; i++)\n  {\n    read(vector[i],stream);\n  }\n}\n\nvoid read(bool& myBool, Bitstream stream)\n{\n  ...\n}\n\ntemplate<T>\nvoid write(const std::vector<T>& myVector, Bitstream myStream)\n{\n  unsigned int size;\n  write((unsigned int)myVector.size(),myStream);\n  for (unsigned int i = 0 ; i < myVector.size() ; i++)\n  {\n    write(vector[i],stream);\n  }\n}\n\nvoid write(const bool& myBool, Bitstream stream)\n{\n  ...\n}\n")),Object(a.mdx)("p",null,"The serialization worked ok, but when trying the deserialization I got a cryptic\ncompiler error:"),Object(a.mdx)("blockquote",null,Object(a.mdx)("p",{parentName:"blockquote"},"impossible to convert from ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::_Vb_reference<_Sizet,_Difft,_MycontTy>")," to\n",Object(a.mdx)("inlineCode",{parentName:"p"},"bool &"))),Object(a.mdx)("p",null,"WTF ? This code worked perfectly for doubles, ints and other basic types bools\nshould be fine no ? After a quick google and follow links session I stopped on\nthe\n",Object(a.mdx)("a",o({parentName:"p"},{href:"http://www.cplusplus.com/reference/stl/vector/"}),"cplusplus.com reference page of the ",Object(a.mdx)("inlineCode",{parentName:"a"},"std::vector")),".\nYou should go and read this page completly, yep now! I give you a few seconds..."),Object(a.mdx)("p",null,"OK you should've finished now, and yeah, you read well, ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::vector<bool>")," is a\ntemplate specialization of ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::vector<T>")," and it does not have the the same\nproperties: ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::vector<bool>::operator[]")," doesn't returns a reference to a\nbool but a specially defined type. I love C++ and especially the STL... Yes, in\nmost cases it's transparent because this type defines a transtyping operator to\nbool. Yes, it is designed to save space as each element of a ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::vector<bool>"),"\ntakes only 1 bit. But, it is inconsistent (",Object(a.mdx)("inlineCode",{parentName:"p"},"std::deque<bool>")," is a ",Object(a.mdx)("inlineCode",{parentName:"p"},"std::deque"),"\nof bools), opposed to the basic principles of c++ templates, and, apparently not\nnormalized (see\n",Object(a.mdx)("a",o({parentName:"p"},{href:"http://www.gotw.ca/publications/N1211.pdf"}),"this open letter wrote by Herb Sutter"),"\nthe day i turned 15). Another good joke from our pals at C++ ISO committee..."))}l.isMDXComponent=!0},fe0W:function(e,t,n){"use strict";var a=n("wTIg"),r=n("+e4l"),o=n("ExVU"),i=n("Bl7J"),c=n("iCNy"),s=n("PJDU"),l=(n("q1tI"),n("XNvW")),d=n("qKvR"),p=Object(a.a)("article",{target:"e1g54axm0"})("background:",l.BG_COLOR_1_GRADIENT,";z-index:10;",l.BOX_SHADOW,";p{line-height:1.7;font-size:1.1em;}h1,h2,h3,h4,h5,h6{font-weight:500;}h2,h3,hr,header.articleHeader{margin:2em 0;border:none;padding-bottom:0.5em;border-bottom:1px ",l.PRIMARY," solid;}"),m=Object(a.a)(r.a,{target:"e1g54axm1"})({name:"1jq247e",styles:"padding:2rem 0.5rem;"});t.a=function(e){var t=e.children,n=e.pageContext,a=e.location,r=n.frontmatter.date&&o.DateTime.fromISO(n.frontmatter.date),l=n.frontmatter.last_update&&o.DateTime.fromISO(n.frontmatter.last_update);return Object(d.d)(i.a,null,Object(d.d)(s.a,{title:n.frontmatter.title,publicationDate:r&&r.toJSDate(),path:a.pathname,updateDate:l&&l.toJSDate()}),Object(d.d)(p,null,Object(d.d)(m,null,Object(d.d)("header",{className:"articleHeader"},Object(d.d)(c.a,null),Object(d.d)("h1",null,n.frontmatter.title),r&&Object(d.d)("p",null,Object(d.d)("small",null,"Published on"," ",Object(d.d)("time",{dateTime:r.toISODate()},r.toFormat("yyyy/MM/dd")),"."))),t,Object(d.d)("footer",{className:"articleFooter"},Object(d.d)(c.a,null),l&&Object(d.d)("p",null,Object(d.d)("small",null,"Last updated on"," ",Object(d.d)("time",{dateTime:l.toISODate()},l.toFormat("yyyy/MM/dd")),"."))))))}},hLT2:function(e,t,n){var a=n("XKFU");a(a.S,"Math",{trunc:function(e){return(e>0?Math.floor:Math.ceil)(e)}})},iCNy:function(e,t,n){"use strict";n("jm62"),n("ioFf"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("0mN4");var a=n("wTIg"),r=n("wwW9"),o=n("Aw06"),i=n("q1tI"),c=n("9eSz"),s=n.n(c),l=n("IP2g"),d=n("wHSu"),p=n("qKvR");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=Object(a.a)(o.a,{target:"e1gx71j0"})({name:"1cpgv1a",styles:"display:inline-flex;& > .mars{margin-inline-start:0.2em;transition:transform 0.3s;}&:hover > .mars{transform:scale(1.2) rotate(-10deg);}"});t.a=function(){var e=r.data.mars,t=Object(i.useMemo)((function(){return b(b({},e.childImageSharp.fixed),{},{height:"1em",width:"1em"})}),[e]);return Object(p.d)(f,{href:"/",title:"Back to the home page"},Object(p.d)(l.a,{icon:d.a}),Object(p.d)(s.a,{fixed:t,className:"mars"}))}},lvtm:function(e,t){e.exports=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}},wwW9:function(e){e.exports=JSON.parse('{"data":{"mars":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAAFW0lEQVQ4y1WUe0zTVxTHf79fWxBKoU8pLS0U6IM+LM+W8ipUBiIywedEdBFkFpWNIWpwqIg6xRgSfOEjczpUVByKyswgZjr/UIgTcAPdFt18Ydyy/bclFHa/+7Wgcyc5uTf33vPJ99x7z6FGtxVQo+sdlNeebs6jQU0aAPr+xtm2ax9kuzuWZza0lWQ0nCtxuvsqcm3ePe+ZYNYvFGT65p3ZcdTZAidFjdam+ADPNrmYKRb1aL2rrL/CMdhbkoDuRfH4sjge5wpn4HSeGR05JtyYHTf4dVF62evz7TNtvtjPUkyTCy/qs30Lr/aXSp/Vpvb+uTYOA0vZwAVG8u18w3h/UYzndkGU50q2ZrwtJYJcS1HjmwwdLrvierqXL5D5oFkJk4Jebn3HJ/lVS4n0RY19+K9qC16uNnh++zB2YnSNiTypMJOfSo1koFhPvsrRkjMODTkap5poNYV5TsVH4myqaeTsonelXsbJrCSa2jsl+3mto/fvGgteVZvGft9oJaMbEvG42kYeVyWTnyuS8P1iC+4W6Ml3MyPIDbsCHRY5OaibPnbMpMTBRF0P9bY92pC14o8qK55XGjxP11jIi9okMrA6nYyszcCvVWl4sNKB/sXJGCk24mG+BgOZ4eRmfCjpMkjJCY3I06qTo96oKXvzmn3lyYN3FhrwQ6lh4seVVtwuSyXDa9LxpDoTD92Z6F+WgTsLbBiYa8ZIgRaDThVuJrLAWAnORIsm9qmEWKWQDFHmQpr6pS7Hdn6eFadydewDGMntpQmkc4kTw+509JW70F2Si6vznLhTlIShOSbcz4tBX4YKNxJDcSVWQtqjhKRJEYz3xAISyw9Ioe6VO9zHZ5nRlRM1fq9YR3rnxZOL89Nwa0k6js7NRfOcWWjOzcK53GQM52tx16nGzeQw9FpluGQQk7bIENIkF4wXBgdCyuO6qYsL7Q0HXCbstkV7umZqSe9sM9rzk3F5jg2fz0rDpy4nqlIzcTjdir6sSNxyhON6khxdJilORwlxRBWMeinfYwnwA0XTjVT7XHtDU5oR62ZEeQ7bY8hFpx4HMqw47oxDh8uKzmwLDjjMqLPGYqtZgxajAlfNMpzXi3FEHYwmeRBWCAM8IVwuW2T0dqq7KMXdbNdjrV49vsmkIc3x0eRQkhbHbDq02bU4b4vCpWQ1OuKUaNAqUBIux44IMU5GhqAxNIh8LA4giQF+4zTNgKHoSur6omzbQTa4JkZJPtKqyHp9BNkaq8YukxqtlnAcNSvREqvAFwYZzujE2KYSYel0IepCBfDCHIH+ZBqH41VHeAyTQv3DfpvODOPgCaMcO6NDJzbHhOGTKDmpjw5FQ/R0bNHI0BApxR61GHvZ79EgF2ClJAiLQwJJPt8fEh53goWx3YIeculCfVVHXXHFl11gU9uvlXkOR0lIK+stGgnZyaZWpxRhlVyIZbIQlEoEWCjkI08wqUzB4xI2TY8XyNB0+f+qZV+qoWePPgy7lMKxPREisj1ciM1KIdkkDyY1MgFKREGwC/hEHxhAwv39IOVyCIemx3zqaPq/0jvkMPpknnTFybZow0bqVWLUKISeytCQiVUyAamSBpFKUSBKgqchh+9PTP48IuAwbJqUZwr2gMPh+DoOw5oPusOs9k1q1RJpqUzQs0TER3FIIApZLwoOGM/h+3kS/HkeFZczLqBp8NiK5bBO01QPh8v4YCx4ErYvKcY3rtOGvWmw7N2Uh3E5QzIOAzHD4DWE8YJoivBoeoj31p0xUzAWSlG7LWqqRinybbyvENFvXat37m3nbtYbGZpq9KNp9zQOnWKIlrw5xzCvYRTFpk79C0CdTqEKIXTrAAAAAElFTkSuQmCC","width":100,"height":100,"src":"/static/9381c89176963851c7ecba1737a9acb8/65e33/mars.png","srcSet":"/static/9381c89176963851c7ecba1737a9acb8/65e33/mars.png 1x,\\n/static/9381c89176963851c7ecba1737a9acb8/6d161/mars.png 1.5x,\\n/static/9381c89176963851c7ecba1737a9acb8/69585/mars.png 2x"}}}}}')}}]);
//# sourceMappingURL=component---src-pages-articles-2010-02-15-std-vector-bool-is-not-a-std-vector-containing-bools-mdx-b4c5673c4cf4fbfb941a.js.map