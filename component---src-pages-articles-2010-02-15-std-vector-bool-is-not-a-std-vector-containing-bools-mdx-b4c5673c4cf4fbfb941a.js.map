{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.object.is.js","webpack:///./node_modules/core-js/modules/es6.math.sign.js","webpack:///./node_modules/core-js/modules/es6.string.repeat.js","webpack:///./src/pages/articles/2010-02-15-std_vector_bool_is_not_a_std_vector_containing_bools.mdx","webpack:///./src/components/defaultPageLayout.js","webpack:///./node_modules/core-js/modules/es6.math.trunc.js","webpack:///./src/components/backHomeLink.js","webpack:///./node_modules/core-js/modules/_math-sign.js"],"names":["$export","S","is","sign","P","repeat","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","ArticleContainer","BG_COLOR_1_GRADIENT","BOX_SHADOW","PRIMARY","ArticleContainee","Container","DefaultPageLayout","children","pageContext","location","publicationDate","frontmatter","date","DateTime","fromISO","updateDate","last_update","title","toJSDate","path","pathname","className","dateTime","toISODate","toFormat","trunc","it","Math","floor","ceil","StyledLink","Link","BackHomeLink","mars","fixedImageCfg","useMemo","childImageSharp","fixed","height","width","href","icon","faChevronLeft","module","exports","x"],"mappings":"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","file":"component---src-pages-articles-2010-02-15-std-vector-bool-is-not-a-std-vector-containing-bools-mdx-b4c5673c4cf4fbfb941a.js","sourcesContent":["// 19.1.3.10 Object.is(value1, value2)\nvar $export = require('./_export');\n$export($export.S, 'Object', { is: require('./_same-value') });\n","// 20.2.2.28 Math.sign(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', { sign: require('./_math-sign') });\n","var $export = require('./_export');\n\n$export($export.P, 'String', {\n  // 21.1.3.13 String.prototype.repeat(count)\n  repeat: require('./_string-repeat')\n});\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/www/www/src/components/defaultPageLayout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`Everything in the title, but let me explain... Lately I've spent a lot of time\ntrying to make a serialization/deserialization work with the huge piece of\nsoftware I'm working on at Golaem. Anyway I came across a strange compiler error\nwhen trying to deserialize a `}<inlineCode parentName=\"p\">{`std::vector<bool>`}</inlineCode>{`. Here's what our serialization\nengine is like:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-cpp\"\n      }}>{`template<T>\nvoid read(std::vector<T>& myVector, Bitstream myStream)\n{\n  unsigned int size;\n  read(size,myStream);\n  vector.resize(size);\n  for (unsigned int i = 0 ; i < size ; i++)\n  {\n    read(vector[i],stream);\n  }\n}\n\nvoid read(bool& myBool, Bitstream stream)\n{\n  ...\n}\n\ntemplate<T>\nvoid write(const std::vector<T>& myVector, Bitstream myStream)\n{\n  unsigned int size;\n  write((unsigned int)myVector.size(),myStream);\n  for (unsigned int i = 0 ; i < myVector.size() ; i++)\n  {\n    write(vector[i],stream);\n  }\n}\n\nvoid write(const bool& myBool, Bitstream stream)\n{\n  ...\n}\n`}</code></pre>\n    <p>{`The serialization worked ok, but when trying the deserialization I got a cryptic\ncompiler error:`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`impossible to convert from `}<inlineCode parentName=\"p\">{`std::_Vb_reference<_Sizet,_Difft,_MycontTy>`}</inlineCode>{` to\n`}<inlineCode parentName=\"p\">{`bool &`}</inlineCode></p>\n    </blockquote>\n    <p>{`WTF ? This code worked perfectly for doubles, ints and other basic types bools\nshould be fine no ? After a quick google and follow links session I stopped on\nthe\n`}<a parentName=\"p\" {...{\n        \"href\": \"http://www.cplusplus.com/reference/stl/vector/\"\n      }}>{`cplusplus.com reference page of the `}<inlineCode parentName=\"a\">{`std::vector`}</inlineCode></a>{`.\nYou should go and read this page completly, yep now! I give you a few seconds...`}</p>\n    <p>{`OK you should've finished now, and yeah, you read well, `}<inlineCode parentName=\"p\">{`std::vector<bool>`}</inlineCode>{` is a\ntemplate specialization of `}<inlineCode parentName=\"p\">{`std::vector<T>`}</inlineCode>{` and it does not have the the same\nproperties: `}<inlineCode parentName=\"p\">{`std::vector<bool>::operator[]`}</inlineCode>{` doesn't returns a reference to a\nbool but a specially defined type. I love C++ and especially the STL... Yes, in\nmost cases it's transparent because this type defines a transtyping operator to\nbool. Yes, it is designed to save space as each element of a `}<inlineCode parentName=\"p\">{`std::vector<bool>`}</inlineCode>{`\ntakes only 1 bit. But, it is inconsistent (`}<inlineCode parentName=\"p\">{`std::deque<bool>`}</inlineCode>{` is a `}<inlineCode parentName=\"p\">{`std::deque`}</inlineCode>{`\nof bools), opposed to the basic principles of c++ templates, and, apparently not\nnormalized (see\n`}<a parentName=\"p\" {...{\n        \"href\": \"http://www.gotw.ca/publications/N1211.pdf\"\n      }}>{`this open letter wrote by Herb Sutter`}</a>{`\nthe day i turned 15). Another good joke from our pals at C++ ISO committee...`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import Container from './container';\nimport { DateTime } from 'luxon';\nimport Layout from './layout';\nimport BackHomeLink from './backHomeLink';\nimport Meta from './meta';\nimport React from 'react';\nimport styled from '@emotion/styled';\nimport { BG_COLOR_1_GRADIENT, PRIMARY, BOX_SHADOW } from '../theme/colors';\n\nconst ArticleContainer = styled.article`\n  background: ${BG_COLOR_1_GRADIENT};\n  z-index: 10;\n  ${BOX_SHADOW};\n\n  p {\n    line-height: 1.7;\n    font-size: 1.1em;\n  }\n\n  h1,\n  h2,\n  h3,\n  h4,\n  h5,\n  h6 {\n    font-weight: 500;\n  }\n\n  h2,\n  h3,\n  hr,\n  header.articleHeader {\n    margin: 2em 0;\n    border: none;\n    padding-bottom: 0.5em;\n    border-bottom: 1px ${PRIMARY} solid;\n  }\n`;\n\nconst ArticleContainee = styled(Container)`\n  padding: 2rem 0.5rem;\n`;\n\nconst DefaultPageLayout = ({ children, pageContext, location }) => {\n  const publicationDate =\n    pageContext.frontmatter.date &&\n    DateTime.fromISO(pageContext.frontmatter.date);\n  const updateDate =\n    pageContext.frontmatter.last_update &&\n    DateTime.fromISO(pageContext.frontmatter.last_update);\n  return (\n    <Layout>\n      <Meta\n        title={pageContext.frontmatter.title}\n        publicationDate={publicationDate && publicationDate.toJSDate()}\n        path={location.pathname}\n        updateDate={updateDate && updateDate.toJSDate()}\n      />\n      <ArticleContainer>\n        <ArticleContainee>\n          <header className=\"articleHeader\">\n            <BackHomeLink />\n            <h1>{pageContext.frontmatter.title}</h1>\n            {publicationDate && (\n              <p>\n                <small>\n                  Published on{' '}\n                  <time dateTime={publicationDate.toISODate()}>\n                    {publicationDate.toFormat('yyyy/MM/dd')}\n                  </time>\n                  .\n                </small>\n              </p>\n            )}\n          </header>\n          {children}\n          <footer className=\"articleFooter\">\n            <BackHomeLink />\n            {updateDate && (\n              <p>\n                <small>\n                  Last updated on{' '}\n                  <time dateTime={updateDate.toISODate()}>\n                    {updateDate.toFormat('yyyy/MM/dd')}\n                  </time>\n                  .\n                </small>\n              </p>\n            )}\n          </footer>\n        </ArticleContainee>\n      </ArticleContainer>\n    </Layout>\n  );\n};\n\nexport default DefaultPageLayout;\n","// 20.2.2.34 Math.trunc(x)\nvar $export = require('./_export');\n\n$export($export.S, 'Math', {\n  trunc: function trunc(it) {\n    return (it > 0 ? Math.floor : Math.ceil)(it);\n  }\n});\n","import Link from './link';\nimport React, { useMemo } from 'react';\nimport styled from '@emotion/styled';\nimport Img from 'gatsby-image';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nconst StyledLink = styled(Link)`\n  display: inline-flex;\n  & > .mars {\n    margin-inline-start: 0.2em;\n    transition: transform 0.3s;\n  }\n\n  &:hover > .mars {\n    transform: scale(1.2) rotate(-10deg);\n  }\n`;\n\nconst BackHomeLink = () => {\n  const { mars } = useStaticQuery(\n    graphql`\n      query {\n        mars: file(relativePath: { eq: \"images/mars.png\" }) {\n          childImageSharp {\n            fixed(width: 100) {\n              ...GatsbyImageSharpFixed\n            }\n          }\n        }\n      }\n    `\n  );\n  const fixedImageCfg = useMemo(\n    () => ({\n      ...mars.childImageSharp.fixed,\n      height: '1em',\n      width: '1em'\n    }),\n    [mars]\n  );\n  return (\n    <StyledLink href=\"/\" title=\"Back to the home page\">\n      <FontAwesomeIcon icon={faChevronLeft} />\n      <Img fixed={fixedImageCfg} className=\"mars\" />\n    </StyledLink>\n  );\n};\n\nexport default BackHomeLink;\n","// 20.2.2.28 Math.sign(x)\nmodule.exports = Math.sign || function sign(x) {\n  // eslint-disable-next-line no-self-compare\n  return (x = +x) == 0 || x != x ? x : x < 0 ? -1 : 1;\n};\n"],"sourceRoot":""}